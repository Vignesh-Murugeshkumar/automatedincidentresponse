<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Incident Response Dashboard</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script>
        async function loadIncidents() {
            const res = await fetch('/api/incidents/all');
            const incidents = await res.json();
            const tbody = document.getElementById('incidents-tbody');
            tbody.innerHTML = '';
            incidents.forEach(i => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>${i.id}</td><td>${i.type}</td><td>${i.user}</td><td>${i.severity}</td><td>${i.score}</td><td>${i.status}</td><td>${i.createdAt}</td>`;
                tbody.appendChild(tr);
            });
            document.getElementById('total').innerText = incidents.length;
        }
        window.onload = loadIncidents;
    </script>
</head>
<body>
    <header>
        <h1>Incident Response Dashboard</h1>
    </header>
    <main>
        <div>
            <strong>Total Incidents: </strong><span id="total">0</span>
        </div>
        <table>
            <thead>
                <tr><th>ID</th><th>Type</th><th>User</th><th>Severity</th><th>Score</th><th>Status</th><th>Created</th></tr>
            </thead>
            <tbody id="incidents-tbody">
            </tbody>
        </table>
    </main>
</body>
</html>
